<!DOCTYPE html>
<html>
<head><title>Chat</title></head>
<body>
   <input id="id" />
  <input id="msg" />
  <button onclick="sendMessage()">Send</button>
  <div id="chat"></div>

  <h2>Send Dummy Notification</h2>
  <button onclick="sendDummyNotification()">Notify</button>



  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script>
    const socket = io("https://docstantsocket-aad4fpamd9cyeebf.canadacentral-01.azurewebsites.net");

    const userId = 1;
    socket.emit("register", userId);

    socket.on("receive_message", (data) => {
      document.getElementById("chat").innerHTML += `<p><b>${data.senderId}</b>: ${data.message}</p>`;
    });

    socket.on("new_notification", (data) => {
      alert("ðŸ”” Notification: " + data.message);
    });





    function sendMessage() {
      const message = document.getElementById("msg").value;
      socket.emit("send_message", {
        senderId: 2,
        receiverId: 1,
        message: message
      });
    }


    function sendDummyNotification() {
      const data = {
        title: "System Maintenance",
        message: "System will be down tonight at 10PM.",
        fromUserId: "admin001",
        toUserId: "1",
        fromDepartment: "IT",
        toDepartment: "Finance",
        userId:1,
        createdAt: new Date(),
        isRead: false
      };

      console.log("ðŸ“¤ Emitting dummy notification:", data);
      socket.emit("notify", data);
    }
  </script>
</body>
</html>
